{"version":3,"sources":["assets\\Script\\Wind.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property(cc.Label)\r\n    label: cc.Label = null;\r\n\r\n    @property\r\n    text: string = 'hello';\r\n\r\n    @property(cc.Node)\r\n    playerNode: cc.Node = null;\r\n\r\n    @property\r\n    offsetX: number = 100; // 右邊偏移量\r\n\r\n    @property\r\n    offsetY: number = 20; // 垂直偏移量\r\n\r\n    @property\r\n    rotation: number = 15;\r\n\r\n    @property({ type: [cc.Node] })\r\n    crateNodes: cc.Node[] = [];\r\n\r\n    @property(cc.Node)\r\n    regionNode: cc.Node = null; // Region 節點\r\n    @property(cc.Node)\r\n    groundNode: cc.Node = null; // Ground 節點\r\n    @property(cc.Node)\r\n    iceImageNode: cc.Node = null; // 新增：冰塊圖片節點\r\n\r\n    @property({ type: cc.Node })\r\n    bridgeNode: cc.Node = null;\r\n\r\n    @property({ type: cc.Node })\r\n    switchNode: cc.Node = null;\r\n\r\n    @property({ type: cc.AudioClip })\r\n    becomeIceAudio: cc.AudioClip = null; // 新增：冰塊音效\r\n\r\n    private animation_idx: number = 0;\r\n    private lastMoveDir: number = 1;\r\n    private isBlowing: boolean = false;\r\n    private iceEffectTimeout: any = null;\r\n    private iceCreated: boolean = false; // 新增：冰塊是否已經生成\r\n    private iceRemoveTimeout: any = null;\r\n    private isRising: boolean = true;  // 控制橋的升降狀態\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start() {\r\n        // 預設隱形\r\n        this.node.active = false;\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        const collider = this.getComponent(cc.PhysicsBoxCollider);\r\n        if (collider) collider.sensor = true;\r\n        // 遊戲開始時禁用 Ground 的碰撞器\r\n        if (this.groundNode) {\r\n            const rigidBody = this.groundNode.getComponent(cc.RigidBody);\r\n            if (rigidBody) rigidBody.enabled = false;\r\n            const boxCollider = this.groundNode.getComponent(cc.PhysicsBoxCollider);\r\n            if (boxCollider) boxCollider.enabled = false;\r\n        }\r\n        // 新增：遊戲開始時隱藏冰塊圖片\r\n        if (this.iceImageNode) {\r\n            this.iceImageNode.active = false;\r\n        }\r\n    }\r\n\r\n    update(dt: number) {\r\n        if (this.playerNode) {\r\n            const playerScript = this.playerNode.getComponent('Player');\r\n            let moveDir = 1;\r\n            if (playerScript) {\r\n                moveDir = playerScript.node.scaleX < 0 ? -1 : 1;\r\n            }\r\n            // 根據方向調整風的位置\r\n            if (moveDir === -1) {\r\n                this.node.x = this.playerNode.x - this.offsetX;\r\n                this.animation_idx = 1;\r\n                this.node.rotation = -this.rotation; // 左邊風向\r\n            } else {\r\n                this.node.x = this.playerNode.x + this.offsetX;\r\n                this.animation_idx = 0;\r\n                this.node.rotation = this.rotation; // 右邊風向\r\n            }\r\n            this.node.y = this.playerNode.y + this.offsetY;\r\n\r\n            // 方向改變時，若風顯示中則立即切換動畫\r\n            if (this.node.active && moveDir !== this.lastMoveDir) {\r\n                const anim = this.getComponent(cc.Animation);\r\n                if (anim && anim.getClips().length > 0) {\r\n                    const clip = anim.getClips()[this.animation_idx];\r\n                    anim.play(clip.name);\r\n                }\r\n            }\r\n            this.lastMoveDir = moveDir;\r\n        }\r\n        // 持續推動箱子\r\n        if (this.isBlowing && this.playerNode) {\r\n            const parent = this.node.parent || cc.director.getScene();\r\n            let crateNodeList: cc.Node[] = [];\r\n            if (this.crateNodes && Array.isArray(this.crateNodes) && this.crateNodes.length > 0) {\r\n                crateNodeList = this.crateNodes;\r\n            } else {\r\n                // 沒有指定則自動尋找場景所有 Crate\r\n                crateNodeList = parent.children.filter(child => child.getComponent && child.getComponent('Crate'));\r\n            }\r\n            crateNodeList.forEach(child => {\r\n                const crate = child.getComponent && child.getComponent('Crate');\r\n                if (crate) {\r\n                    const dx = child.x - this.playerNode.x;\r\n                    const dy = child.y - this.playerNode.y;\r\n                    const distance = Math.sqrt(dx * dx + dy * dy);\r\n                    if (dx > 0 && distance < 300 && this.playerNode.scaleX > 0) {\r\n                        crate.applyWindForce(1);\r\n                    } else if (dx < 0 && distance < 300 && this.playerNode.scaleX < 0) {\r\n                        crate.applyWindForce(-1);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        // 持續推動橋\r\n        if (this.isBlowing && this.bridgeNode && this.playerNode && this.playerNode.scaleX > 0) {\r\n            const dx = this.bridgeNode.x - this.playerNode.x;\r\n            const dy = this.bridgeNode.y - this.playerNode.y;\r\n            const distance = Math.sqrt(dx * dx + dy * dy);\r\n            cc.log(\"Bridge distance:\", distance);\r\n            if (distance < 300) {\r\n                if(this.isRising) {\r\n                    if(this.bridgeNode.y < 1200) {\r\n                        this.bridgeNode.y += 50 * dt; // 每秒上升100單位\r\n                    }\r\n                    else {\r\n                        this.isRising = false;\r\n                    }\r\n                } else {\r\n                    if(this.bridgeNode.y > 100) {\r\n                        this.bridgeNode.y -= 50 * dt; // 每秒下降100單位\r\n                    }\r\n                    else {\r\n                        this.isRising = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this.switchNode && this.playerNode.scaleX > 0) {\r\n            const switchScript = this.switchNode.getComponent('Switch');\r\n            if (switchScript) {\r\n                switchScript.setState(0);\r\n                if (this.isBlowing && this.bridgeNode && this.playerNode) {\r\n                    const dx = this.bridgeNode.x - this.playerNode.x;\r\n                    const dy = this.bridgeNode.y - this.playerNode.y;\r\n                    const distance = Math.sqrt(dx * dx + dy * dy);\r\n                    cc.log(\"Bridge distance:\", distance);\r\n                    if (distance < 300 && this.bridgeNode.y < 1200) {\r\n                        switchScript.setState(1);\r\n                    }\r\n                    else {\r\n                        switchScript.setState(0);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onKeyDown(event: cc.Event.EventKeyboard) {\r\n        if (event.keyCode === cc.macro.KEY.f) {\r\n            // 風動畫和吹箱子功能（這裡不判斷 iceCreated）\r\n            if (!this.node.active) {\r\n                this.node.active = true;\r\n                // 播放第一個動畫\r\n                const anim = this.getComponent(cc.Animation);\r\n                if (anim && anim.getClips().length > 0) {\r\n                    const firstClip = anim.getClips()[this.animation_idx];\r\n                    anim.play(firstClip.name);\r\n                }\r\n            } else {\r\n                // 若已經顯示，確保動畫持續撥放\r\n                const anim = this.getComponent(cc.Animation);\r\n                if (anim && anim.getClips().length > 0) {\r\n                    const firstClip = anim.getClips()[this.animation_idx];\r\n                    if (!anim.getAnimationState(firstClip.name).isPlaying) {\r\n                        anim.play(firstClip.name);\r\n                    }\r\n                }\r\n            }\r\n            this.isBlowing = true;\r\n\r\n            // 只有冰塊生成這段要判斷 iceCreated\r\n            if (\r\n                !this.iceCreated &&\r\n                this.regionNode && this.groundNode && this.playerNode && this.iceImageNode\r\n            ) {\r\n                // 以世界座標計算距離\r\n                const regionPos = this.regionNode.convertToWorldSpaceAR(cc.v2(0, 0));\r\n                const playerPos = this.playerNode.convertToWorldSpaceAR(cc.v2(0, 0));\r\n                const dx = regionPos.x - playerPos.x;\r\n                const dy = regionPos.y - playerPos.y;\r\n                const distance = Math.sqrt(dx * dx + dy * dy);\r\n                if ((distance < 500 && dx > 0 && this.playerNode.scaleX > 0) ||\r\n                    (distance < 500 && dx < 0 && this.playerNode.scaleX < 0)) {\r\n                    // 同時顯示冰塊圖片與啟用 Ground\r\n                    this.iceImageNode.active = true;\r\n                    // 生成時播放音效\r\n                    if (this.becomeIceAudio) {\r\n                        cc.audioEngine.playEffect(this.becomeIceAudio, false);\r\n                    }\r\n                    let sprite = this.iceImageNode.getComponent(cc.Sprite);\r\n                    if (sprite) {\r\n                        sprite.node.opacity = 0;\r\n                        cc.tween(sprite.node)\r\n                            .to(1.5, { opacity: 255 })\r\n                            .start();\r\n                    }\r\n                    this.groundNode.active = true;\r\n                    this.groundNode.opacity = 0;\r\n                    cc.tween(this.groundNode)\r\n                        .to(1.5, { opacity: 255 })\r\n                        .start();\r\n                    const rigidBody = this.groundNode.getComponent(cc.RigidBody);\r\n                    if (rigidBody) rigidBody.enabled = true;\r\n                    const boxCollider = this.groundNode.getComponent(cc.PhysicsBoxCollider);\r\n                    if (boxCollider) boxCollider.enabled = true;\r\n                    this.iceCreated = true;\r\n                    // 清除前一次的timeout\r\n                    if (this.iceRemoveTimeout) {\r\n                        clearTimeout(this.iceRemoveTimeout);\r\n                        this.iceRemoveTimeout = null;\r\n                    }\r\n                    // 5秒後同時淡出與關閉\r\n                    this.iceRemoveTimeout = setTimeout(() => {\r\n                        let sprite = this.iceImageNode.getComponent(cc.Sprite);\r\n                        if (sprite) {\r\n                            cc.tween(sprite.node)\r\n                                .to(1.5, { opacity: 0 })\r\n                                .call(() => {\r\n                                    this.iceImageNode.active = false;\r\n                                })\r\n                                .start();\r\n                        } else {\r\n                            this.iceImageNode.active = false;\r\n                        }\r\n                        cc.tween(this.groundNode)\r\n                            .to(1.5, { opacity: 0 })\r\n                            .call(() => {\r\n                                this.groundNode.active = false;\r\n                                this.groundNode.opacity = 255;\r\n                            })\r\n                            .start();\r\n                        // 消失時也播放音效\r\n                        if (this.becomeIceAudio) {\r\n                            cc.audioEngine.playEffect(this.becomeIceAudio, false);\r\n                        }\r\n                        this.iceCreated = false;\r\n                    }, 5000);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onKeyUp(event: cc.Event.EventKeyboard) {\r\n        if (event.keyCode === cc.macro.KEY.f) {\r\n            this.node.active = false;\r\n            this.isBlowing = false;\r\n        }\r\n        if (event.keyCode === cc.macro.KEY.space) {\r\n            this.node.active = false;\r\n            this.isBlowing = false;\r\n        }\r\n    }\r\n\r\n    onDestroy() {\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}